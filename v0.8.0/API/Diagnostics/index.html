<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Diagnostics · CalibrateEDMF.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="CalibrateEDMF.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">CalibrateEDMF.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation instructions</a></li><li><a class="tocitem" href="../../getting_started/">Getting started</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Diagnostics</a></li><li><a class="tocitem" href="../ReferenceModels/">ReferenceModels</a></li><li><a class="tocitem" href="../ReferenceStats/">ReferenceStats</a></li><li><a class="tocitem" href="../Pipeline/">Pipeline</a></li><li><a class="tocitem" href="../TurbulenceConvectionUtils/">TurbulenceConvectionUtils</a></li><li><a class="tocitem" href="../KalmanProcessUtils/">KalmanProcessUtils</a></li><li><a class="tocitem" href="../DistributionUtils/">DistributionUtils</a></li><li><a class="tocitem" href="../LESUtils/">LESUtils</a></li><li><a class="tocitem" href="../HelperFuncs/">HelperFuncs</a></li></ul></li><li><a class="tocitem" href="../../tc_runner/">Running TC.jl with optimal parameters</a></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li><li><a class="tocitem" href="../../References/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Diagnostics</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Diagnostics</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/main/docs/src/API/Diagnostics.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Diagnostics"><a class="docs-heading-anchor" href="#Diagnostics">Diagnostics</a><a id="Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics" title="Permalink"></a></h1><p>This module defines and implements diagnostics of the training process. Diagnostics are organized into groups (defined as dictionaries <code>io_dictionary_...</code>) and written to file in netCDF4 format. All implemented dictionaries, as well as all their entries, are defined below. These include error metrics, parameter ensembles and their statistical moments, validation diagnostics, and more. </p><p>The diagnostics are meant to evolve organically as users require more information regarding the training process. If you can think of diagnostics that may be useful to a wide range of users, consider opening an issue or pull request on <a href="https://github.com/CliMA/CalibrateEDMF.jl">GitHub</a>.</p><p>Data within the resulting <code>Diagnostics.nc</code> file can be analyzed using the Julia package <a href="https://alexander-barth.github.io/NCDatasets.jl/stable/">NCDatasets.jl</a>. The file can also be processed using software written in other popular programming languages like python through <a href="http://unidata.github.io/netcdf4-python/">netCDF4-python</a> or <a href="https://docs.xarray.dev/en/stable/">xarray</a>.</p><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_metrics" href="#CalibrateEDMF.Diagnostics.io_dictionary_metrics"><code>CalibrateEDMF.Diagnostics.io_dictionary_metrics</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_metrics()
io_dictionary_metrics(ekp::EnsembleKalmanProcess, mse_full::Vector{FT}) where {FT &lt;: Real}</code></pre><p>Scalar metrics dictionary.</p><p>Evaluations of the data-model mismatch in inverse problem (i.e., latent) space are denoted <code>loss</code>. Errors computed in normalized physical (i.e., full) space are denoted <code>mse_full</code>. Differences between these two metrics include:</p><ul><li>Covariance matrix defining the inner product (covariance weighting in <code>loss</code> vs L2 norm in <code>mse_full</code>),</li><li>Treatment of trailing eigenvalues (truncation and regularization vs considering all eigenmodes).</li><li>The <code>loss</code> includes the L2 penalty term, <code>mse_full</code> does not.</li></ul><p>Elements:</p><ul><li><code>loss_mean_g</code> :: <code>(ḡ - y)&#39;Γ_inv(ḡ - y)</code>. This is the ensemble mean loss seen by the Kalman inversion process.</li><li><code>loss_mean</code> :: Ensemble mean of <code>(g - y)&#39;Γ_inv(g - y)</code>.</li><li><code>loss_min</code> :: Ensemble min of <code>(g - y)&#39;Γ_inv(g - y)</code>.</li><li><code>loss_max</code> :: Ensemble max of <code>(g - y)&#39;Γ_inv(g - y)</code>.</li><li><code>loss_var</code> :: Variance estimate of <code>(g - y)&#39;Γ_inv(g - y)</code>, empirical (EKI/EKS) or quadrature (UKI).</li><li><code>loss_nn_mean</code> :: <code>(g_nn - y)&#39;Γ_inv(nn - y)</code>, where <code>g_nn</code> is the forward model output at the particle closest to the mean in parameter space.</li><li><code>mse_full_mean</code> :: Ensemble mean of MSE(<code>g_full</code>, <code>y_full</code>).</li><li><code>mse_full_min</code> :: Ensemble min of MSE(<code>g_full</code>, <code>y_full</code>).</li><li><code>mse_full_max</code> :: Ensemble max of MSE(<code>g_full</code>, <code>y_full</code>).</li><li><code>mse_full_var</code> :: Variance estimate of MSE(<code>g_full</code>, <code>y_full</code>), empirical (EKI/EKS) or quadrature (UKI).</li><li><code>mse_full_nn_mean</code> :: MSE(<code>g_full</code>, <code>y_full</code>) of particle closest to the mean in parameter space. The mean in parameter space is the solution to the particle-based inversion.</li><li><code>failures</code> :: Number of particle failures per iteration. If the calibration is run with the &quot;high_loss&quot; failure handler, this diagnostic will not capture the failures due to parameter mapping.</li><li><code>nn_mean_index</code> :: Particle index of the nearest neighbor to the ensemble mean in parameter space. This index is used to construct <code>..._nn_mean</code> metrics.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L275-L303">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_val_metrics" href="#CalibrateEDMF.Diagnostics.io_dictionary_val_metrics"><code>CalibrateEDMF.Diagnostics.io_dictionary_val_metrics</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_val_metrics()
io_dictionary_val_metrics(ekp::EnsembleKalmanProcess, mse_full::Vector{FT}) where {FT &lt;: Real}</code></pre><p>Dictionary of scalar validation metrics.</p><p>Evaluations of the data-model mismatch in inverse problem (i.e., latent) space are denoted <code>loss</code>. Errors computed in normalized physical (i.e., full) space are denoted <code>mse_full</code>. Differences between these two metrics include:</p><ul><li>Covariance matrix defining the inner product (covariance weighting in <code>loss</code> vs L2 norm in <code>mse_full</code>),</li><li>Treatment of trailing eigenvalues (truncation and regularization vs considering all eigenmodes).</li><li>The <code>loss</code> includes the L2 penalty term, <code>mse_full</code> does not.</li></ul><p>Elements:</p><ul><li><code>val_loss_mean</code> :: Ensemble mean of validation <code>(g - y)&#39;Γ_inv(g - y)</code>.</li><li><code>val_loss_min</code> :: Ensemble min of validation <code>(g - y)&#39;Γ_inv(g - y)</code>.</li><li><code>val_loss_max</code> :: Ensemble max of validation <code>(g - y)&#39;Γ_inv(g - y)</code>.</li><li><code>val_loss_var</code> :: Variance estimate of validation <code>(g - y)&#39;Γ_inv(g - y)</code>, empirical (EKI/EKS) or quadrature (UKI).</li><li><code>val_loss_nn_mean</code> :: Validation <code>(g_nn - y)&#39;Γ_inv(nn - y)</code>, where <code>g_nn</code> is the validation forward model output at the particle closest to the mean in parameter space.</li><li><code>val_mse_full_mean</code> :: Ensemble mean of MSE(<code>g_full_val</code>, <code>y_full_val</code>).</li><li><code>val_mse_full_min</code> :: Ensemble min of MSE(<code>g_full_val</code>, <code>y_full_val</code>).</li><li><code>val_mse_full_max</code> :: Ensemble max of MSE(<code>g_full_val</code>, <code>y_full_val</code>).</li><li><code>val_mse_full_var</code> :: Variance estimate of MSE(<code>g_full_val</code>, <code>y_full_val</code>), empirical (EKI/EKS) or quadrature (UKI).</li><li><code>val_mse_full_nn_mean</code> :: MSE(<code>g_full_val</code>, <code>y_full_val</code>) of particle closest to the mean in parameter space. The mean in parameter space is the solution to the particle-based inversion.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L365-L390">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_ensemble" href="#CalibrateEDMF.Diagnostics.io_dictionary_ensemble"><code>CalibrateEDMF.Diagnostics.io_dictionary_ensemble</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_ensemble()
io_dictionary_ensemble(ekp::EnsembleKalmanProcess, priors::ParameterDistribution)</code></pre><p>Dictionary of ensemble parameter diagnostics.</p><p>Elements:</p><ul><li><code>u_mean</code> :: Ensemble mean parameter in unconstrained (inverse problem) space.</li><li><code>phi_mean</code> :: Ensemble mean parameter in constrained (physical) space.</li><li><code>u_cov</code> :: Sample parameter covariance in unconstrained (inverse problem) space.</li><li><code>phi_cov</code> :: Sample parameter covariance in constrained (physical) space.</li><li><code>phi_low_unc</code> :: Lower uncertainty bound (μ-1σ) of the parameter value in constrained (physical) space.</li><li><code>phi_upp_unc</code> :: Upper uncertainty bound (μ+1σ) of the parameter value in constrained (physical) space.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L604-L618">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_particle_state" href="#CalibrateEDMF.Diagnostics.io_dictionary_particle_state"><code>CalibrateEDMF.Diagnostics.io_dictionary_particle_state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_particle_state()
io_dictionary_particle_state(ekp::EnsembleKalmanProcess, priors::ParameterDistribution)</code></pre><p>Dictionary of particle-wise parameter diagnostics, not involving forward model evaluations.</p><p>Elements:</p><ul><li><code>u</code>   :: Parameter ensemble in unconstrained (inverse problem) space.</li><li><code>phi</code> :: Parameter ensemble in constrained (physical) space.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L461-L471">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_particle_eval" href="#CalibrateEDMF.Diagnostics.io_dictionary_particle_eval"><code>CalibrateEDMF.Diagnostics.io_dictionary_particle_eval</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_particle_eval()
io_dictionary_particle_eval(
    ekp::EnsembleKalmanProcess,
    g_full::Matrix{FT},
    mse_full::Vector{FT},
    d::IT,
    d_full::IT,
    batch_indices::Vector{IT},
) where {FT &lt;: Real, IT &lt;: Integer}</code></pre><p>Dictionary of particle-wise diagnostics involving forward model evaluations.</p><p>Elements:</p><ul><li><code>g</code> :: Forward model evaluation in inverse problem space.</li><li><code>g_full</code> :: Forward model evaluation in primitive output space, normalized using the pooled field covariance.</li><li><code>mse_full</code> :: Particle-wise evaluation of MSE(<code>g_full</code>, <code>y_full</code>).</li><li><code>batch_indices</code> :: Indices of <code>ReferenceModel</code>s evaluated per iteration.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L488-L507">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_val_particle_eval" href="#CalibrateEDMF.Diagnostics.io_dictionary_val_particle_eval"><code>CalibrateEDMF.Diagnostics.io_dictionary_val_particle_eval</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_val_particle_eval()
io_dictionary_val_particle_eval(
    g::Matrix{FT},
    g_full::Matrix{FT},
    mse_full::Vector{FT},
    d::IT,
    d_full::IT,
    batch_indices::Vector{IT},
) where {FT &lt;: Real, IT &lt;: Integer}</code></pre><p>Dictionary of particle-wise validation diagnostics involving forward model evaluations.</p><p>Elements:</p><ul><li><code>val_g</code> :: Validation forward model evaluation in reduced space.</li><li><code>val_g_full</code> :: Validation forward model evaluation in primitive output space, normalized using the pooled field covariance.</li><li><code>val_mse_full</code> :: Particle-wise evaluation of MSE(<code>val_g_full</code>, <code>val_y_full</code>).</li><li><code>val_batch_indices</code> :: Indices of validation <code>ReferenceModel</code>s evaluated per iteration.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L546-L565">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_reference" href="#CalibrateEDMF.Diagnostics.io_dictionary_reference"><code>CalibrateEDMF.Diagnostics.io_dictionary_reference</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_reference()
io_dictionary_reference(
    ref_stats::ReferenceStatistics,
    ref_models::Vector{ReferenceModel},
    write_full_stats::Bool = true,
)</code></pre><p>Dictionary of diagnostics pertaining to the <code>ReferenceModel</code>s and <code>ReferenceStatistics</code> that define the inverse problem.</p><p>Elements:</p><ul><li><code>Gamma</code> :: Covariance matrix in the inverse problem latent space (regularized low-dimensional encoding).</li><li><code>Gamma_full</code> :: Covariance matrix of normalized observed variables in full space (possibly ill-conditioned). Only written to file if <code>write_full_stats</code> is true.</li><li><code>Gamma_full_diag</code> :: Diagonal of <code>Gamma_full</code>, useful when <code>Gamma_full</code> is not written to file.</li><li><code>y</code> :: Observations in the inverse problem latent space (low-dimensional encoding).</li><li><code>y_full</code> :: Normalized observations in full space.</li><li><code>P_pca</code> :: PCA projection matrix from full space to low-dimensional latent space.</li><li><code>num_vars</code> :: Maximum number of observed fields (not dimensions) per <code>ReferenceModel</code>.</li><li><code>var_dof</code> :: Maximum number of degrees of freedom of each field per <code>ReferenceModel</code>.</li><li><code>config_pca_dim</code> :: Dimensionality of the latent space associated with each <code>ReferenceModel</code>.</li><li><code>config_name</code> :: Name of each <code>ReferenceModel</code> used to construct the inverse problem.</li><li><code>config_z_obs</code> :: Vertical locations of the observations of each <code>ReferenceModel</code>.</li><li><code>norm_factor</code> :: Pooled variance used to normalize each field of each <code>ReferenceModel</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L21-L45">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_val_reference" href="#CalibrateEDMF.Diagnostics.io_dictionary_val_reference"><code>CalibrateEDMF.Diagnostics.io_dictionary_val_reference</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_val_reference()
io_dictionary_val_reference(
    ref_stats::ReferenceStatistics,
    ref_models::Vector{ReferenceModel},
    write_full_stats::Bool = true,
)</code></pre><p>Dictionary of diagnostics pertaining to the <code>ReferenceModel</code>s and <code>ReferenceStatistics</code> in the validation set.</p><p>Elements:</p><ul><li><code>Gamma_val</code> :: Covariance matrix in latent space, using the same truncation as for the training set.</li><li><code>Gamma_full_val</code> :: Covariance matrix of normalized observed variables in full space. Only written to file if <code>write_full_stats</code> is true.</li><li><code>Gamma_full_diag_val</code> :: Diagonal of <code>Gamma_full_val</code>, useful when <code>Gamma_full_val</code> is not written to file.</li><li><code>y_val</code> :: Observations in latent space, for observed fields in the validation set.</li><li><code>y_full_val</code> :: Normalized observations in full space, for the validation set.</li><li><code>P_pca_val</code> :: PCA projection matrix from full space to low-dimensional latent space, for the validation set.</li><li><code>num_vars_val</code> :: Maximum number of observed fields (not dimensions) per validation <code>ReferenceModel</code>.</li><li><code>var_dof_val</code> :: Maximum number of degrees of freedom of each field per validation <code>ReferenceModel</code>.</li><li><code>config_pca_dim_val</code> :: Dimensionality of the latent space associated with each validation <code>ReferenceModel</code>.</li><li><code>config_name_val</code> :: Name of each <code>ReferenceModel</code> in the validation set.</li><li><code>config_z_obs_val</code> :: Vertical locations of the observations of each validation <code>ReferenceModel</code>.</li><li><code>norm_factor_val</code> :: Pooled variance used to normalize each field of each validation <code>ReferenceModel</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L120-L144">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.io_dictionary_prior" href="#CalibrateEDMF.Diagnostics.io_dictionary_prior"><code>CalibrateEDMF.Diagnostics.io_dictionary_prior</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_dictionary_prior()
io_dictionary_prior(priors::ParameterDistribution)</code></pre><p>Parameter prior diagnostics dictionary.</p><p>Elements:</p><ul><li><code>u_mean_prior</code> :: Prior mean in unconstrained parameter space.</li><li><code>phi_mean_prior</code> :: Prior mean in constrained parameter space.</li><li><code>u_var_prior</code> :: Diagonal of the prior covariance in unconstrained space.</li><li><code>phi_low_unc_prior</code> :: Lower uncertainty bound (μ-1σ_prior) of prior in constrained space.</li><li><code>phi_upp_unc_prior</code> :: Upper uncertainty bound (μ+1σ_prior) of prior in constrained space.</li><li><code>phi_low_std_prior</code> :: Lower standard bound (μ-1) of prior in constrained space. Useful measure of minimum allowed values for bounded parameters.</li><li><code>phi_upp_std_prior</code> :: Upper standard bound (μ+1) of prior in constrained space. Useful measure of maximum allowed values for bounded parameters.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L220-L235">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.get_ϕ_cov" href="#CalibrateEDMF.Diagnostics.get_ϕ_cov"><code>CalibrateEDMF.Diagnostics.get_ϕ_cov</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_ϕ_cov(ekp::EnsembleKalmanProcess, priors::ParameterDistribution)</code></pre><p>Get the last parameter covariance estimate in constrained (physical) space.</p><p>For ensemble methods, the covariance of the transformed parameters is returned. For unscented methods, the covariance is computed through a quadrature on the transformed quadrature points. The covariance of the transformed parameters returned here is equal to the transformed covariance only under a first order Taylor approximation, which is consistent with other approximations underlying the calibration method.</p><p>Inputs:</p><ul><li><code>ekp</code>    :: The EnsembleKalmanProcess.</li><li><code>priors</code> :: The priors defining transformations between constrained and unconstrained space.</li></ul><p>Outputs:</p><ul><li>The parameter covariance in constrained space.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L672-L693">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.get_metric_var" href="#CalibrateEDMF.Diagnostics.get_metric_var"><code>CalibrateEDMF.Diagnostics.get_metric_var</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_metric_var(ekp::EnsembleKalmanProcess, metric::Vector{FT}) where {FT &lt;: Real}</code></pre><p>Computes the ensemble variance of a scalar metric.</p><p>For ensemble methods, the sample variance of the metric is returned. For unscented methods, the variance is computed through a quadrature. Ensemble members where the metric is <code>NaN</code> are filtered out of the computation.</p><p>Inputs:</p><ul><li><code>ekp</code>    :: The EnsembleKalmanProcess.</li><li><code>metric</code> :: A vector containing the value of the metric for each ensemble member.</li></ul><p>Outputs:</p><ul><li>The ensemble variance of <code>metric</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L709-L727">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.get_mean_nearest_neighbor" href="#CalibrateEDMF.Diagnostics.get_mean_nearest_neighbor"><code>CalibrateEDMF.Diagnostics.get_mean_nearest_neighbor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_mean_nearest_neighbor(ekp::EnsembleKalmanProcess)</code></pre><p>Returns the index of the nearest neighbor to the ensemble mean parameter, in unconstrained space.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L743-L747">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CalibrateEDMF.Diagnostics.compute_ensemble_loss" href="#CalibrateEDMF.Diagnostics.compute_ensemble_loss"><code>CalibrateEDMF.Diagnostics.compute_ensemble_loss</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute_ensemble_loss(
    g::AbstractMatrix{FT},
    y::AbstractVector{FT},
    Γ::Union{AbstractMatrix{FT}, UniformScaling{FT}},
) where {FT &lt;: Real}
compute_ensemble_loss(ekp::EnsembleKalmanProcess)</code></pre><p>Computes the covariance-weighted error <code>(g - y)&#39;Γ_inv(g - y)</code> for each ensemble member.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/CalibrateEDMF.jl/blob/b3d1751548cb49c4c432f11508a3cc16c1456297/src/Diagnostics.jl#L754-L763">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../getting_started/">« Getting started</a><a class="docs-footer-nextpage" href="../ReferenceModels/">ReferenceModels »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Saturday 8 October 2022 06:39">Saturday 8 October 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
